<!DOCTYPE html>
<html lang="en">

    <head>
        <meta name="generator" content="Eleventy">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="code,blog,programmer,developer,tech,story,essay,thought,web"/>

        <meta name="theme-color" content="#0a0a0a">
        <meta name="fediverse:creator" content="@chrishannah@fosstodon.org"/>

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;1,9..144,300&family=IBM+Plex+Sans:wght@300;400;500&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

        <style>
            {% include "../../assets/css/signal-station.css" %}
            {% include "../../assets/css/signal-content.css" %}
            {% include "../../assets/css/highlight.css" %}
            {% include "../../assets/css/lightbox.css" %}
            {% include "../../assets/css/tinylytics.css" %}
        </style>

        <link rel="me" href="https://micro.blog/ChrisHannah"/>
        <link rel="me" href="https://github.com/chrishannah"/>
        <meta name="pocket-site-verification" content="b9fdccdecc6f0b9e69b03cdebe20e7"/>
        <meta name="google-site-verification" content="Chw2h37fUgKvTGRa3AZxs1MirZXhMELRSdC8UmrR_jM"/>
        <meta name="p:domain_verify" content="cce9b0fd8aedc78145dfb114fcfe425e"/>
        <link href="https://x.com/chrishannah" rel="me">
        <link rel="webmention" href="https://webmention.io/chrishannah.me/webmention"/>
        <link rel="pingback" href="https://webmention.io/chrishannah.me/xmlrpc"/>

        <!-- RSS Feeds -->
        <link rel="alternate" type="application/rss+xml" href="https://chrishannah.me/feed" title="Chris Hannah">

        <!-- Analytics -->
        <script src="https://tinylytics.app/embed/e7KoNsv_jq9FizddEYyk.js?hits&kudos" defer></script>

        <!-- Open Graph -->
        <meta property="og:title" content="{{ title }}">
        <meta property="twitter:title" content="{{ title }}">
        <meta property="og:type" content="article">
        <meta property="twitter:url" content="https://chrishannah.me{{ page.url }}">
        <meta property="og:url" content="https://chrishannah.me{{ page.url }}">
        <meta property="twitter:domain" content="chrishannah.me">
        <meta property="og:logo" content="https://chrishannah.me/cv/profile.jpg"/>

        <!-- Indie Auth -->
        <link rel="authorization_endpoint" href="https://indieauth.com/auth">
        <link rel="token_endpoint" href="https://tokens.indieauth.com/token">
        <link rel="micropub" href="https://chrishannah.me/api/micropub">

        {% if image %}
            <meta property="og:image" content="{{ image }}">
            <meta property="twitter:image" content="{{ image }}">
            <meta property="twitter:card" content="summary_large_image">
        {% elif title and env.ELEVENTY_ENV != 'development' %}
            <meta property="og:image" content="https://chrishannah.me/api/og?title={{ title | urlencode }}">
            <meta property="twitter:image" content="https://chrishannah.me/api/og?title={{ title | urlencode }}">
            <meta property="twitter:card" content="summary_large_image">
        {% else %}
            <meta property="twitter:card" content="summary">
        {% endif %}

        {% if title %}
            <title>{{ title }} | Chris Hannah</title>
        {% else %}
            <title>Chris Hannah</title>
        {% endif %}

        <!-- Prevent flash of wrong theme -->
        <script>
            (function() {
                var theme = localStorage.getItem('theme-preference') || 'auto';
                document.documentElement.setAttribute('data-theme', theme);
            })();
        </script>
    </head>

    <body>
        <div class="container">
            <!-- Header Block - same as homepage -->
            <header class="header-block">
                <div class="header-main">
                    <div class="brand">
                        <h1><a href="/">{{ site.title }}</a></h1>
                        <span class="brand-sub">{{ homepage.tagline }}</span>
                    </div>
                    <div class="header-meta">
                        <div class="meta-item">
                            <span class="meta-label">Status</span>
                            <span class="meta-value status-online"><span class="pulse"></span> {{ homepage.status.text }}</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Volume</span>
                            <span class="meta-value">{{ homepage.since | volumeNumber }}</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Issue</span>
                            <span class="meta-value">#{{ collections.all | excludeDrafts | length }}</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Since</span>
                            <span class="meta-value">{{ homepage.since }}</span>
                        </div>
                    </div>
                </div>

                <nav class="signal-nav">
                    <a href="/">Home</a>
                    <a href="/archive/">Archive</a>
                    <a href="/essays/">Essays</a>
                    <a href="/about/">About</a>
                    <a href="/contact/">Contact</a>
                    <a href="/subscribe/">Subscribe</a>
                    <div class="theme-toggle">
                        <button data-theme="light" title="Light mode">Light</button>
                        <button data-theme="dark" title="Dark mode">Dark</button>
                        <button data-theme="auto" title="System preference">Auto</button>
                    </div>
                </nav>
            </header>

            <!-- Content Block -->
            <main class="content-block">
                {{ content | safe }}
            </main>

            <!-- Footer - same as homepage -->
            {% set allPosts = collections.all | excludeDrafts %}
            <footer class="signal-footer">
                <span>{{ site.url | replace("https://", "") }}</span>
                <span>Post <span class="hl">#{{ allPosts | length }}</span> of <span class="hl">&infin;</span></span>
                <span>Next milestone: <span class="hl">#{{ allPosts | nextMilestone }}</span></span>
                <span>Powered by Eleventy</span>
            </footer>
        </div>

        <script>
            var codeHighlightingEnabled = document
                .getElementsByTagName('code')
                .length != 0;
            if (codeHighlightingEnabled) {
                const script = document.createElement("script");
                script.src = 'https://chrishannah.me/js/highlight.js';
                script.async = true;
                document
                    .body
                    .appendChild(script);
            }

            var images = document.querySelectorAll('img:not(.u-photo):not([width="24"]):not([height="24"]), img.hero');
            if (images.length > 0) {
                const lightboxScript = document.createElement("script");
                lightboxScript.src = '/js/lightbox.js';
                lightboxScript.onload = function () {
                    if (typeof initLightbox === 'function') {
                        initLightbox();
                    }
                };
                document
                    .body
                    .appendChild(lightboxScript);
            }
        </script>
        <script src="/js/theme.js"></script>
    </body>
</html>
